components:
  schemas:
    APIError:
      $id: https://github.com/forkbombeu/credimi/pkg/internal/apierror/api-error
      $schema: https://json-schema.org/draft/2020-12/schema
      additionalProperties: false
      properties:
        error:
          type: string
        message:
          type: string
        reason:
          type: string
        status:
          type: integer
      type: object
    ActivityType:
      additionalProperties: false
      properties:
        name:
          type: string
      type: object
    AuthenticateApiKeyResponse:
      $id: https://github.com/forkbombeu/credimi/pkg/internal/apis/handlers/authenticate-api-key-response
      $schema: https://json-schema.org/draft/2020-12/schema
      additionalProperties: false
      properties:
        message:
          type: string
        token:
          type: string
      type: object
    Callback:
      additionalProperties: false
      properties:
        attempt:
          type: integer
        lastAttemptCompleteTime:
          type: string
        lastAttemptFailure:
          $ref: '#/components/schemas/Failure'
        nextAttemptScheduleTime:
          type: string
        publicInfo:
          $ref: '#/components/schemas/CallbackInfo'
        state:
          type: string
        trigger:
          $ref: '#/components/schemas/CallbackInfo'
      type: object
    CallbackInfo:
      additionalProperties: false
      properties:
        callback:
          $ref: '#/components/schemas/Payload'
        registrationTime:
          type: string
      type: object
    Callbacks:
      additionalProperties: false
      properties:
        callbacks:
          items:
            $ref: '#/components/schemas/Callback'
          type: array
      type: object
    CancelMyCheckRunResponse:
      $id: https://github.com/forkbombeu/credimi/pkg/internal/apis/handlers/cancel-my-check-run-response
      $schema: https://json-schema.org/draft/2020-12/schema
      additionalProperties: false
      properties:
        checkId:
          type: string
        message:
          type: string
        namespace:
          type: string
        runId:
          type: string
        status:
          type: string
        time:
          type: string
      type: object
    ChecksLogsResponse:
      $id: https://github.com/forkbombeu/credimi/pkg/internal/apis/handlers/checks-logs-response
      $schema: https://json-schema.org/draft/2020-12/schema
      additionalProperties: false
      properties:
        channel:
          type: string
        message:
          type: string
        namespace:
          type: string
        run_id:
          type: string
        status:
          type: string
        time:
          type: string
        workflow_id:
          type: string
      type: object
    Duration:
      additionalProperties: false
      properties:
        nanos:
          type: integer
        seconds:
          type: integer
      type: object
    ExportData:
      additionalProperties: false
      properties:
        checkId:
          type: string
        config:
          type: object
        input:
          type: object
        runId:
          type: string
      type: object
    ExportMyCheckRunResponse:
      $id: https://github.com/forkbombeu/credimi/pkg/internal/apis/handlers/export-my-check-run-response
      $schema: https://json-schema.org/draft/2020-12/schema
      additionalProperties: false
      properties:
        export:
          $ref: '#/components/schemas/ExportData'
      type: object
    Failure:
      additionalProperties: false
      properties:
        cause:
          $ref: '#/components/schemas/Failure'
        failureInfo:
          additionalProperties:
            type: string
          type: object
        message:
          type: string
        source:
          type: string
        stackTrace:
          type: string
      type: object
    GenerateApiKeyRequest:
      $id: https://github.com/forkbombeu/credimi/pkg/internal/apis/handlers/generate-api-key-request
      $schema: https://json-schema.org/draft/2020-12/schema
      additionalProperties: false
      properties:
        name:
          type: string
      type: object
    GenerateApiKeyResponse:
      $id: https://github.com/forkbombeu/credimi/pkg/internal/apis/handlers/generate-api-key-response
      $schema: https://json-schema.org/draft/2020-12/schema
      additionalProperties: false
      properties:
        api_key:
          type: string
      type: object
    GetMyCheckRunHistoryResponse:
      $id: https://github.com/forkbombeu/credimi/pkg/internal/apis/handlers/get-my-check-run-history-response
      $schema: https://json-schema.org/draft/2020-12/schema
      additionalProperties: false
      properties:
        checkId:
          type: string
        count:
          type: integer
        history:
          items:
            type: object
          type: array
        namespace:
          type: string
        runId:
          type: string
        time:
          type: string
      type: object
    GetMyCheckRunResponse:
      $id: https://github.com/forkbombeu/credimi/pkg/internal/apis/handlers/get-my-check-run-response
      $schema: https://json-schema.org/draft/2020-12/schema
      additionalProperties: false
      properties:
        callbacks:
          $ref: '#/components/schemas/Callbacks'
        executionConfig:
          $ref: '#/components/schemas/WorkflowExecutionConfigWithMetadata'
        pendingActivities:
          items:
            $ref: '#/components/schemas/PendingActivityInfo'
          type: array
        pendingChildren:
          items:
            $ref: '#/components/schemas/PendingChildren'
          type: array
        pendingNexusOperations:
          items:
            $ref: '#/components/schemas/PendingNexusOperation'
          type: array
        pendingWorkflowTask:
          $ref: '#/components/schemas/PendingWorkflowTaskInfo'
        workflowExecutionInfo:
          $ref: '#/components/schemas/WorkflowExecutionInfo'
      type: object
    ListMyCheckRunsResponse:
      $id: https://github.com/forkbombeu/credimi/pkg/internal/apis/handlers/list-my-check-runs-response
      $schema: https://json-schema.org/draft/2020-12/schema
      additionalProperties: false
      properties:
        executions:
          items:
            $ref: '#/components/schemas/WorkflowExecutionSummary'
          type: array
      type: object
    ListMyChecksResponse:
      $id: https://github.com/forkbombeu/credimi/pkg/internal/apis/handlers/list-my-checks-response
      $schema: https://json-schema.org/draft/2020-12/schema
      additionalProperties: false
      properties:
        executions:
          items:
            $ref: '#/components/schemas/WorkflowExecutionSummary'
          type: array
      type: object
    Memo:
      additionalProperties: false
      properties:
        fields:
          additionalProperties:
            $ref: '#/components/schemas/Payload'
          type: object
      type: object
    Payload:
      additionalProperties: false
      properties:
        data:
          type: string
        metadata:
          additionalProperties:
            type: string
          type: object
      type: object
    Payloads:
      items:
        $ref: '#/components/schemas/Payload'
      type: array
    PendingActivityInfo:
      additionalProperties: false
      properties:
        activityId:
          type: string
        activityType:
          $ref: '#/components/schemas/ActivityType'
        assignedBuildId:
          type: string
        attempt:
          type: integer
        expirationTime:
          type: string
        heartbeatDetails:
          $ref: '#/components/schemas/Payloads'
        lastFailure:
          $ref: '#/components/schemas/Failure'
        lastHeartbeatTime:
          type: string
        lastStartedTime:
          type: string
        lastWorkerIdentity:
          type: string
        maximumAttempts:
          type: integer
        scheduledTime:
          type: string
        state:
          type: string
      type: object
    PendingChildren:
      additionalProperties: false
      properties:
        initiatedId:
          type: string
        parentClosePolicy:
          type: string
        runId:
          type: string
        workflowId:
          type: string
        workflowTypeName:
          type: string
      type: object
    PendingNexusOperation:
      additionalProperties: false
      properties:
        attempt:
          type: integer
        endpoint:
          type: string
        lastAttemptCompleteTime:
          type: string
        lastAttemptFailure:
          $ref: '#/components/schemas/Failure'
        nextAttemptScheduleTime:
          type: string
        operation:
          type: string
        operationId:
          type: string
        scheduledEventId:
          type: string
        service:
          type: string
        state:
          type: string
      type: object
    PendingWorkflowTaskInfo:
      additionalProperties: false
      properties:
        attempt:
          type: integer
        lastFailure:
          $ref: '#/components/schemas/Failure'
        originalScheduledTime:
          type: string
        scheduledTime:
          type: string
        startedTime:
          type: string
        state:
          type: string
      type: object
    ReRunCheckRequest:
      $id: https://github.com/forkbombeu/credimi/pkg/internal/apis/handlers/re-run-check-request
      $schema: https://json-schema.org/draft/2020-12/schema
      additionalProperties: false
      properties:
        config:
          type: object
      type: object
    ReRunCheckResponse:
      $id: https://github.com/forkbombeu/credimi/pkg/internal/apis/handlers/re-run-check-response
      $schema: https://json-schema.org/draft/2020-12/schema
      additionalProperties: false
      properties:
        run_id:
          type: string
        workflow_id:
          type: string
      type: object
    TaskQueue:
      additionalProperties: false
      properties:
        kind:
          type: string
        name:
          type: string
        normalName:
          type: string
      type: object
    TerminateMyCheckRunResponse:
      $id: https://github.com/forkbombeu/credimi/pkg/internal/apis/handlers/terminate-my-check-run-response
      $schema: https://json-schema.org/draft/2020-12/schema
      additionalProperties: false
      properties:
        checkId:
          type: string
        message:
          type: string
        namespace:
          type: string
        runId:
          type: string
        status:
          type: string
        time:
          type: string
      type: object
    UserMetadata:
      additionalProperties: false
      properties:
        details:
          $ref: '#/components/schemas/Payload'
        summary:
          $ref: '#/components/schemas/Payload'
      type: object
    VersioningInfo:
      additionalProperties: false
      properties:
        useVersioning:
          type: boolean
      type: object
    WorkflowExecutionConfigWithMetadata:
      additionalProperties: false
      properties:
        defaultWorkflowTaskTimeout:
          $ref: '#/components/schemas/Duration'
        taskQueue:
          $ref: '#/components/schemas/TaskQueue'
        userMetadata:
          $ref: '#/components/schemas/UserMetadata'
        workflowExecutionTimeout:
          $ref: '#/components/schemas/Duration'
        workflowRunTimeout:
          $ref: '#/components/schemas/Duration'
      type: object
    WorkflowExecutionInfo:
      additionalProperties: false
      properties:
        assignedBuildId:
          type: string
        closeTime:
          type: string
        executionTime:
          type: string
        historyLength:
          type: string
        historySizeBytes:
          type: string
        id:
          type: string
        memo:
          $ref: '#/components/schemas/Memo'
        name:
          type: string
        runId:
          type: string
        searchAttributes:
          $ref: '#/components/schemas/WorkflowSearchAttributes'
        startTime:
          type: string
        stateTransitionCount:
          type: string
        status:
          type: string
        versioningInfo:
          $ref: '#/components/schemas/VersioningInfo'
      type: object
    WorkflowExecutionSummary:
      additionalProperties: false
      properties:
        children:
          items:
            $ref: '#/components/schemas/WorkflowExecutionSummary'
          type: array
        displayName:
          type: string
        endTime:
          type: string
        execution:
          $ref: '#/components/schemas/WorkflowIdentifier'
        startTime:
          type: string
        status:
          type: string
        type:
          $ref: '#/components/schemas/WorkflowType'
      type: object
    WorkflowIdentifier:
      additionalProperties: false
      properties:
        runId:
          type: string
        workflowId:
          type: string
      type: object
    WorkflowSearchAttributes:
      type: object
    WorkflowType:
      additionalProperties: false
      properties:
        name:
          type: string
      type: object
info:
  contact:
    email: support@forkbomb.eu
    name: credimi Support
    url: https://forkbomb.solutions
  description: credimi API Gateway for managing EUDI-ARF compliance checks...
  title: "credimi \U0001F440 API Gateway"
  version: 1.4.0
openapi: 3.0.1
paths:
  /api/apikey/authenticate:
    get:
      description: Authenticate an API key and return Bearer token
      operationId: authenticateApiKey
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthenticateApiKeyResponse'
          description: Successful response
        default:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/APIError'
          description: An unexpected error occurred.
      summary: Authenticate API Key
  /api/apikey/generate:
    post:
      description: Generate a new API key for the authenticated user.
      operationId: generateApiKey
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GenerateApiKeyRequest'
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenerateApiKeyResponse'
          description: Successful response
        default:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/APIError'
          description: An unexpected error occurred.
      summary: Generate API Key
  /api/my/checks:
    get:
      description: List all checks for the authenticated user
      operationId: listMyChecks
      parameters:
        - description: Bearer token for authentication
          in: header
          name: Authorization
          required: true
          schema:
            type: string
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ListMyChecksResponse'
          description: Successful response
        default:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/APIError'
          description: An unexpected error occurred.
      summary: Get a list of all checks for the authenticated user
  /api/my/checks/{checkId}/runs:
    get:
      description: List all runs for a specific check
      operationId: listMyCheckRuns
      parameters:
        - description: The ID for the checkId.
          in: path
          name: checkId
          required: true
          schema:
            type: string
        - description: Bearer token for authentication
          in: header
          name: Authorization
          required: true
          schema:
            type: string
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ListMyCheckRunsResponse'
          description: Successful response
        default:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/APIError'
          description: An unexpected error occurred.
      summary: Get a list of all runs for a specific check
  /api/my/checks/{checkId}/runs/{runId}:
    get:
      description: Get details of a specific run for a check
      operationId: getMyCheckRun
      parameters:
        - description: The ID for the checkId.
          in: path
          name: checkId
          required: true
          schema:
            type: string
        - description: The ID for the runId.
          in: path
          name: runId
          required: true
          schema:
            type: string
        - description: Bearer token for authentication
          in: header
          name: Authorization
          required: true
          schema:
            type: string
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetMyCheckRunResponse'
          description: Successful response
        default:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/APIError'
          description: An unexpected error occurred.
      summary: Get details of a specific run for a check
  /api/my/checks/{checkId}/runs/{runId}/cancel:
    post:
      description: Cancel a specific check run
      operationId: cancelMyCheckRun
      parameters:
        - description: The ID for the checkId.
          in: path
          name: checkId
          required: true
          schema:
            type: string
        - description: The ID for the runId.
          in: path
          name: runId
          required: true
          schema:
            type: string
        - description: Bearer token for authentication
          in: header
          name: Authorization
          required: true
          schema:
            type: string
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CancelMyCheckRunResponse'
          description: Successful response
        default:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/APIError'
          description: An unexpected error occurred.
      summary: Cancel a specific check run
  /api/my/checks/{checkId}/runs/{runId}/export:
    get:
      description: Export a specific check run
      operationId: exportMyCheckRun
      parameters:
        - description: The ID for the checkId.
          in: path
          name: checkId
          required: true
          schema:
            type: string
        - description: The ID for the runId.
          in: path
          name: runId
          required: true
          schema:
            type: string
        - description: Bearer token for authentication
          in: header
          name: Authorization
          required: true
          schema:
            type: string
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ExportMyCheckRunResponse'
          description: Successful response
        default:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/APIError'
          description: An unexpected error occurred.
      summary: Export a specific check run
  /api/my/checks/{checkId}/runs/{runId}/history:
    get:
      description: Get the history of events for a specific run of a check
      operationId: getMyCheckRunHistory
      parameters:
        - description: The ID for the checkId.
          in: path
          name: checkId
          required: true
          schema:
            type: string
        - description: The ID for the runId.
          in: path
          name: runId
          required: true
          schema:
            type: string
        - description: Bearer token for authentication
          in: header
          name: Authorization
          required: true
          schema:
            type: string
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetMyCheckRunHistoryResponse'
          description: Successful response
        default:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/APIError'
          description: An unexpected error occurred.
      summary: Get the history of events for a specific run of a check
  /api/my/checks/{checkId}/runs/{runId}/logs:
    get:
      description: Start or Stop logs for a specific check run and get the log channel
      operationId: myCheckLogs
      parameters:
        - description: The ID for the checkId.
          in: path
          name: checkId
          required: true
          schema:
            type: string
        - description: The ID for the runId.
          in: path
          name: runId
          required: true
          schema:
            type: string
        - description: Can be 'start' or 'stop' to control logging for the check run
          in: query
          name: action
          required: false
          schema:
            type: string
        - description: Bearer token for authentication
          in: header
          name: Authorization
          required: true
          schema:
            type: string
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ChecksLogsResponse'
          description: Successful response
        default:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/APIError'
          description: An unexpected error occurred.
      summary: Start or Stop logs for a specific check run
  /api/my/checks/{checkId}/runs/{runId}/rerun:
    post:
      description: Re-run a specific check run
      operationId: rerunMyCheck
      parameters:
        - description: The ID for the checkId.
          in: path
          name: checkId
          required: true
          schema:
            type: string
        - description: The ID for the runId.
          in: path
          name: runId
          required: true
          schema:
            type: string
        - description: Bearer token for authentication
          in: header
          name: Authorization
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ReRunCheckRequest'
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReRunCheckResponse'
          description: Successful response
        default:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/APIError'
          description: An unexpected error occurred.
      summary: Re-run a specific check run
  /api/my/checks/{checkId}/runs/{runId}/terminate:
    post:
      description: Terminate a specific check run
      operationId: terminateMyCheckRun
      parameters:
        - description: The ID for the checkId.
          in: path
          name: checkId
          required: true
          schema:
            type: string
        - description: The ID for the runId.
          in: path
          name: runId
          required: true
          schema:
            type: string
        - description: Bearer token for authentication
          in: header
          name: Authorization
          required: true
          schema:
            type: string
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TerminateMyCheckRunResponse'
          description: Successful response
        default:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/APIError'
          description: An unexpected error occurred.
      summary: Terminate a specific check run
servers:
  - description: Demo server
    url: https://demo.credimi.io
  - description: Localhost server
    url: http://localhost:8090/
