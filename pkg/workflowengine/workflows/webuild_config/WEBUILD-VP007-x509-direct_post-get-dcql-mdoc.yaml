# SPDX-FileCopyrightText: 2026 Forkbomb BV
#
# SPDX-License-Identifier: AGPL-3.0-or-later

version: "1.1"
name: WEBUILD flow
env:
  WEBUILD_API: https://webuild.api.forkbomb.eu
tests:
  VP007:
    steps:
      - name: "Test Case VP-007: WE BUILD - DCQL-based Verifiable Presentation request for urn:eu.europa.ec.eudi:pid:1:mso_mdoc ,X509 client_id_scheme,direct_post,GET method for request URI."
        http:
          url: ${{ env.WEBUILD_API }}/mdl/generateVPRequest
          method: GET
          params:
            credentialType: urn:eu.europa.ec.eudi:pid:1
            sessionId: [[.session_id | toString]]
          check:
            status: 200
          captures:
            qr:
              jsonpath: $.qr
            deeplink:
              jsonpath: $.deepLink
            session_id:
              jsonpath: $.sessionId
